<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>备团助手</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/axios@1.7.2/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape@3.30.2/dist/cytoscape.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dagre@0.8.5/dist/dagre.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-dagre@2.5.0/cytoscape-dagre.js"></script>
</head>
<body>
  <header>
    <h1>备团助手</h1>
    <div class="actions">
            <button id="btn-layout">自动布局</button>
      <button id="btn-new-canvas" title="新建画布/清空当前">新建画布</button>
      <button id="btn-new-node">新建节点</button>
      <select id="template-select"></select>
      <button id="btn-apply-template">用模板创建</button>
      <input id="search" placeholder="搜索关键字" />
  <span class="muted">（可用 关键词 或 键:值）</span>
  <button id="btn-duplicate" title="复制选中节点 (Ctrl+Shift+K)">复制节点</button>
  <label class="toggle"><input type="checkbox" id="toggle-edge-labels"> 显示连线文本</label>
      <label class="toggle" title="双击节点进入聚焦，空白处退出">
        聚焦层数
        <input id="focus-depth" type="number" min="1" value="1" style="width:64px;" />
      </label>
      <details class="fold">
        <summary>自动关联筛选</summary>
        <div class="fold-body">
          <div class="io-row">
            <label style="margin-right:6px;">预设</label>
            <select id="auto-filter-preset">
              <option value="all">全看</option>
              <option value="none">全不看</option>
            </select>
          </div>
          <div class="io-row">
            <label style="margin-right:6px;">标签表达式</label>
            <input id="auto-filter" placeholder="例如：地点 OR 标签（留空=全看）" style="min-width:240px;" />
          </div>
          <div class="muted" style="margin-top:4px;">用 OR/或/|| 表示并集；多个空格分隔也视为并集。AND/与 对单条连线无意义，将按并集处理。</div>
        </div>
      </details>
  <button id="btn-undo" title="撤销 (Ctrl+Z)">撤销</button>
  <button id="btn-redo" title="重做 (Ctrl+Y)">重做</button>
      <details class="fold">
        <summary>导入 / 导出</summary>
        <div class="fold-body">
          <div class="io-row">
            <button id="btn-export">导出 JSON</button>
            <button id="btn-export-csv">导出 CSV</button>
            <button id="btn-export-md">导出 Markdown</button>
            <button id="btn-export-png">导出 PNG</button>
          </div>
          <div class="io-row">
            <label class="import">导入 JSON <input type="file" id="import-json" accept="application/json" /></label>
            <label class="import">导入 CSV <input type="file" id="import-csv" accept="text/csv,.csv" /></label>
          </div>
        </div>
      </details>
    </div>
  </header>
  <main>
    <aside>
      <h3>节点编辑</h3>
      <div id="node-editor">
        <div class="hint">选择图中的一个节点以编辑字段。</div>
      </div>
      <h3>手动关联</h3>
      <div>
        <button id="btn-start-link">选择两个节点建连</button>
        <div id="link-status" class="muted"></div>
      </div>
  <h3>被隐藏的自动关联</h3>
  <div id="suppressed-list" class="muted">无</div>
    </aside>
    <div id="resizer" class="resizer" title="拖动调整宽度"></div>
    <section id="graph"></section>
  </main>

  <script src="/static/main.js"></script>
</body>
</html>
